{"version":3,"sources":["pages/user/register/index.js","pages/user/register/style.module.scss"],"names":["Register","antd_es_form__WEBPACK_IMPORTED_MODULE_15__","create","state","loading","onSubmit","event","preventDefault","_this","props","form","validateFields","error","values","setState","authService","signUp","then","registeredUser","user","catch","err","antd_es_notification__WEBPACK_IMPORTED_MODULE_9__","message","description","compareToFirstPassword","rule","value","callback","getFieldValue","validateToNextPassword","confirmDirty","force","handleConfirmBlur","e","target","checkAgreement","sendToken","id","res","console","log","this","_this$state","react__WEBPACK_IMPORTED_MODULE_16___default","a","createElement","react_helmet__WEBPACK_IMPORTED_MODULE_17__","title","className","styles","block","inner","name","email","antd_es_button__WEBPACK_IMPORTED_MODULE_7__","type","ghost","onClick","react_router_dom__WEBPACK_IMPORTED_MODULE_18__","to","layout","hideRequiredMark","Item","getFieldDecorator","rules","required","antd_es_input__WEBPACK_IMPORTED_MODULE_5__","placeholder","prefix","antd_es_icon__WEBPACK_IMPORTED_MODULE_3__","style","color","hasFeedback","validator","onBlur","valuePropName","initialValue","antd_es_checkbox__WEBPACK_IMPORTED_MODULE_1__","href","htmlType","Component","module","exports","login"],"mappings":"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","file":"static/js/55.0f68703f.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { Form, Input, Button, Checkbox, Icon, notification } from 'antd'\nimport { Helmet } from 'react-helmet'\nimport { Link } from 'react-router-dom'\nimport { authService } from '../../../services'\nimport styles from './style.module.scss'\n\n@Form.create()\nclass Register extends Component {\n  state ={\n    loading: false\n  }\n\n  onSubmit = event => {\n    event.preventDefault()\n    const { form } = this.props\n    form.validateFields((error, values) => {\n      if (!error) {\n        this.setState({loading: true})\n        authService.signUp(values)\n          .then((registeredUser) => {\n            this.setState({user: registeredUser, loading: false})\n          })\n          .catch((err) => {\n            notification.error({\n              message: 'Failed',\n              description: err,\n            })\n            this.setState({loading: false})\n          })\n      }\n    })\n  }\n\n  compareToFirstPassword = (rule, value, callback) => {\n    const { form } = this.props\n    if (value && value !== form.getFieldValue('password')) {\n      callback('Your password and confirmation does not match!')\n    } else {\n      callback()\n    }\n  }\n\n  validateToNextPassword = (rule, value, callback) => {\n    const { form } = this.props\n    const { confirmDirty } = this.state\n    if (value && confirmDirty) {\n      form.validateFields(['confirm'], { force: true })\n    }\n    callback()\n  }\n\n  handleConfirmBlur = e => {\n    const { value } = e.target\n    const { confirmDirty } = this.state\n    this.setState({\n      confirmDirty: confirmDirty || !!value,\n    })\n  }\n\n  checkAgreement = (rule, value, callback) => {\n    if (!value) {\n      callback('Please, confirm your agreement')\n    } else {\n      callback()\n    }\n  }\n\n  sendToken = () => {\n    const {user} = this.state;\n    authService.sendToken({id:user.id}).then(res => {\n      console.log(res);\n    })\n  }\n\n  render() {\n    const { form } = this.props\n    const { loading, user } = this.state\n    return (\n      <div>\n        <Helmet title=\"Register\" />\n        <div className={styles.block}>\n          <div className=\"row\">\n            <div className=\"col-xl-12\">\n              <div className={styles.inner}>\n                {user &&\n                  <div>\n                    <h4>\n                      <strong>Dear {user.name}, thank you for registration</strong>\n                    </h4>\n                    <p className=\"mb-3\">Confirmation email has been sent to {user.email}.</p>\n                    <p className=\"mb-3\">Please, follow the instructions to activate your account.</p>\n                    <div className=\"mb-3\">\n                      <Button type=\"primary\" ghost onClick={this.sendToken}>\n                        Resend\n                      </Button>\n                      {' '}\n                      confirmation if you did not receive email from us.\n                    </div>\n                    <Link to=\"/user/login\" className=\"btn\">\n                      &larr; Sign in to continue\n                    </Link>\n                  </div>\n                }\n\n                {!user &&\n                  <div className={styles.form}>\n                    <h4 className=\"text-uppercase\">\n                      <strong>Create your account</strong>\n                    </h4>\n                    <p>And start spending more time on your thoughts.</p>\n                    <br />\n                    <Form layout=\"vertical\" hideRequiredMark onSubmit={this.onSubmit}>\n                      <Form.Item>\n                        {form.getFieldDecorator('name', {\n                          rules: [{ required: true, message: 'Please input your name' }],\n                        })(\n                          <Input placeholder=\"First name\" />,\n                        )}\n                      </Form.Item>\n                      <Form.Item>\n                        {form.getFieldDecorator('surname', {\n                          rules: [{ required: true, message: 'Please input your last name' }],\n                        })(\n                          <Input placeholder=\"Last name\" />,\n                        )}\n                      </Form.Item>\n                      <Form.Item>\n                        {form.getFieldDecorator('email', {\n                          rules: [{ required: true, message: 'Please input your email address' }],\n                        })(\n                          <Input\n                            prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                            type=\"email\"\n                            placeholder=\"Email\"\n                          />,\n                        )}\n                      </Form.Item>\n                      <Form.Item hasFeedback>\n                        {form.getFieldDecorator('password', {\n                          rules: [\n                            {\n                              required: true,\n                              message: 'Please input your password'\n                            },\n                            {\n                              validator: this.validateToNextPassword,\n                            },\n                          ],\n                        })(\n                          <Input\n                            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                            type=\"password\"\n                            placeholder=\"Input your password\"\n                          />,\n                        )}\n                      </Form.Item>\n                      <Form.Item hasFeedback>\n                        {form.getFieldDecorator('confirm', {\n                          rules: [\n                            {\n                              required: true,\n                              message: 'Please confirm your password'\n                            },\n                            {\n                              validator: this.compareToFirstPassword,\n                            },\n                          ],\n                        })(\n                          <Input\n                            type=\"password\"\n                            onBlur={this.handleConfirmBlur}\n                            placeholder=\"Confirm your password\"\n                          />,\n                        )}\n                      </Form.Item>\n                      <Form.Item>\n                        {form.getFieldDecorator('i', {\n                          valuePropName: 'checked',\n                          initialValue: false,\n                          rules: [\n                            {\n                              validator: this.checkAgreement,\n                            },\n                          ],\n                        })(\n                          <Checkbox>\n                            <span className=\"ml-3 register-link\">\n                              I agree to the\n                              {' '}\n                              <a\n                                href=\"javascript: void(0);\"\n                                className=\"text-primary utils__link--underlined\"\n                              >\n                                Terms of Service\n                              </a> {' '} and {' '}\n                              <a\n                                href=\"javascript: void(0);\"\n                                className=\"text-primary utils__link--underlined\"\n                              >\n                                Privacy Policy\n                              </a>\n                            </span>\n                          </Checkbox>\n                        )}\n                      </Form.Item>\n                      <div className=\"form-actions\">\n                        <Button\n                          type=\"primary\"\n                          className=\"width-150 mr-4\"\n                          htmlType=\"submit\"\n                          loading={loading}\n                        >\n                          Register\n                        </Button>\n                        <span className=\"ml-3 register-link\">\n                          <a\n                            href=\"/#/user/login\"\n                            className=\"text-primary utils__link--underlined\"\n                          >\n                            Sign in\n                          </a>{' '}\n                          if you have an account\n                        </span>\n                      </div>\n                    </Form>\n                  </div>\n                }\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Register\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"style_login__3E0CU\",\"title\":\"style_title__3er5X\",\"block\":\"style_block___-cjH\",\"inner\":\"style_inner__PyrZy\",\"form\":\"style_form__UgjSU\"};"],"sourceRoot":""}