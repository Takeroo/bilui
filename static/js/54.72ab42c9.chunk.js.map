{"version":3,"sources":["pages/user/password/reset/index.js","pages/user/password/reset/style.module.scss"],"names":["Reset","antd_es_form__WEBPACK_IMPORTED_MODULE_13__","create","state","tokenLoad","loading","token","onSubmit","event","preventDefault","form","_this","props","user","validateFields","error","values","setState","password","authService","resetPassword","then","valid","success","catch","err","antd_es_notification__WEBPACK_IMPORTED_MODULE_7__","message","description","compareToFirstPassword","rule","value","callback","_this$props","intl","getFieldValue","formatMessage","id","validateToNextPassword","confirmDirty","force","handleConfirmBlur","e","target","_this2","this","URLSearchParams","location","search","get","confirmPasswordResetToken","result","invalid","_this$props2","_this$state","react__WEBPACK_IMPORTED_MODULE_14___default","a","createElement","react_helmet__WEBPACK_IMPORTED_MODULE_16__","title","className","styles","block","components_LayoutComponents_Loader__WEBPACK_IMPORTED_MODULE_19__","inner","react_intl__WEBPACK_IMPORTED_MODULE_15__","react_router_dom__WEBPACK_IMPORTED_MODULE_18__","to","concat","name","layout","hideRequiredMark","Item","hasFeedback","getFieldDecorator","rules","required","validator","antd_es_input__WEBPACK_IMPORTED_MODULE_3__","prefix","antd_es_icon__WEBPACK_IMPORTED_MODULE_5__","type","style","color","placeholder","onBlur","antd_es_button__WEBPACK_IMPORTED_MODULE_1__","htmlType","react_router_dom__WEBPACK_IMPORTED_MODULE_17__","component","NotFoundPage","Component","injectIntl","module","exports","login"],"mappings":"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","file":"static/js/54.72ab42c9.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { FormattedMessage, injectIntl } from 'react-intl'\nimport { Form, Input, Button, notification, Icon } from 'antd'\nimport { Helmet } from 'react-helmet'\nimport { Link, Route } from 'react-router-dom'\nimport Loader from 'components/LayoutComponents/Loader'\nimport styles from './style.module.scss'\nimport { authService } from '../../../../services'\nimport NotFoundPage from '../../../404'\n\n@Form.create()\nclass Reset extends Component {\n  state ={\n    tokenLoad: true,\n    loading: false,\n    token: true\n  }\n\n  componentDidMount() {\n    const query = new URLSearchParams(this.props.location.search);\n    const token = query.get('token');\n    if(!token){\n      this.setState({token: false});\n    }\n    else{\n      authService.confirmPasswordResetToken(token).then(result =>{\n        this.setState({user: result, tokenLoad: false, valid: true});\n      }).catch((err) =>{\n        this.setState({tokenLoad: false, invalid: true, message: err});\n      })\n    }\n  }\n\n  onSubmit = event => {\n    event.preventDefault()\n    const { form } = this.props\n    const { user } = this.state\n    form.validateFields((error, values) => {\n      if (!error) {\n        this.setState({loading: true});\n        user.password = values.password\n        authService.resetPassword(user)\n          .then(() => {\n            this.setState({loading: false, valid: false, success: true});\n          })\n          .catch((err) => {\n            notification.error({\n              message: 'Failed',\n              description: err,\n            })\n            this.setState({loading: false});\n          })\n      }\n    })\n  }\n\n  compareToFirstPassword = (rule, value, callback) => {\n    const { form, intl } = this.props\n    if (value && value !== form.getFieldValue('password')) {\n      callback(intl.formatMessage({ id: 'user.password.reset.confirmationError'}))\n    } else {\n      callback()\n    }\n  }\n\n  validateToNextPassword = (rule, value, callback) => {\n    const { form } = this.props\n    const { confirmDirty } = this.state\n    if (value && confirmDirty) {\n      form.validateFields(['confirm'], { force: true })\n    }\n    callback()\n  }\n\n  handleConfirmBlur = e => {\n    const { value } = e.target\n    const { confirmDirty } = this.state\n    this.setState({\n      confirmDirty: confirmDirty || !!value,\n    })\n  }\n\n  render() {\n    const { form, intl } = this.props\n    const { loading, valid, invalid, token, tokenLoad, message, user, success } = this.state\n    if(!token) return (<Route component={NotFoundPage} />)\n\n    return (\n      <div>\n        <Helmet title={intl.formatMessage({id:'user.password.reset'})} />\n        <div className={styles.block}>\n          <div className=\"row\">\n            <div className=\"col-xl-12\">\n              {tokenLoad && <Loader />}\n\n              {success &&\n                <div className={styles.inner}>\n                  <div>\n                    <h4 className=\"text-uppercase\">\n                      <FormattedMessage id=\"user.password.reset.updated\" />\n                    </h4>\n                    <p className=\"mb-3\"><FormattedMessage id=\"user.password.reset.updatedMessage\" /></p>\n                    <Link to=\"/user/login\" className=\"btn\">\n                      &larr; <FormattedMessage id=\"user.password.reset.continue\" />\n                    </Link>\n                  </div>\n                </div>\n              }\n\n              {valid &&\n                <div className={styles.inner}>\n                  <div className={styles.form}>\n                    <h4 className=\"text-uppercase\">\n                      <strong><FormattedMessage id=\"user.password.reset\" /></strong>\n                    </h4>\n                    <p className=\"mb-3\">\n                      <FormattedMessage id=\"user.password.reset.hi\" />\n                      { ` ${user.name}, `}\n                      <FormattedMessage id=\"user.password.reset.resetPassword\" />\n                    </p>\n                    <br />\n                    <Form layout=\"vertical\" hideRequiredMark onSubmit={this.onSubmit}>\n                      <Form.Item hasFeedback>\n                        {form.getFieldDecorator('password', {\n                          rules: [\n                            {\n                              required: true,\n                              message: intl.formatMessage({id:'user.password.reset.newPasswordMessage'})\n                            },\n                            {\n                              validator: this.validateToNextPassword,\n                            },\n                          ],\n                        })(\n                          <Input\n                            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                            type=\"password\"\n                            placeholder={intl.formatMessage({id:'user.password.reset.newPassword'})}\n                          />,\n                        )}\n                      </Form.Item>\n                      <Form.Item hasFeedback>\n                        {form.getFieldDecorator('confirm', {\n                          rules: [\n                            {\n                              required: true,\n                              message: intl.formatMessage({id:'user.password.reset.confirmPasswordMessage'})\n                            },\n                            {\n                              validator: this.compareToFirstPassword,\n                            },\n                          ],\n                        })(\n                          <Input\n                            type=\"password\"\n                            onBlur={this.handleConfirmBlur}\n                            placeholder={intl.formatMessage({id:'user.password.reset.confirmPassword'})}\n                          />,\n                        )}\n                      </Form.Item>\n                      <div className=\"mb-2\">\n                        <Link to=\"/user/login\" className=\"utils__link--blue utils__link--underlined\">\n                          <FormattedMessage id=\"user.password.reset.back\" />\n                        </Link>\n                      </div>\n                      <div className=\"form-actions\">\n                        <Button\n                          type=\"primary\"\n                          className=\"width-150 mr-4\"\n                          htmlType=\"submit\"\n                          loading={loading}\n                        >\n                          <FormattedMessage id=\"user.password.reset\" />\n                        </Button>\n                      </div>\n                    </Form>\n                  </div>\n                </div>\n              }\n\n              {invalid &&\n                <div className={styles.inner}>\n                  <div>\n                    <h4>\n                      <strong><FormattedMessage id=\"user.password.reset.invalidLink\" /></strong>\n                    </h4>\n                    <p className=\"mb-3\"><FormattedMessage id=\"user.password.reset.invalidLinkMessage\" /></p>\n                    <p className=\"mb-3\">{ message }</p>\n                    <Link to=\"/user/login\" className=\"btn\">\n                      &larr; <FormattedMessage id=\"user.password.reset.continue\" />\n                    </Link>\n                  </div>\n                </div>\n              }\n\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default injectIntl(Reset)\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"style_login__IWqGl\",\"block\":\"style_block__1yHL1\",\"inner\":\"style_inner__3o7oX\",\"form\":\"style_form__1l7vp\"};"],"sourceRoot":""}