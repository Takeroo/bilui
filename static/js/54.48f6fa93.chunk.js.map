{"version":3,"sources":["pages/user/password/reset/index.js","pages/user/password/reset/style.module.scss"],"names":["Reset","antd_es_form__WEBPACK_IMPORTED_MODULE_13__","create","state","tokenLoad","loading","token","onSubmit","event","preventDefault","form","_this","props","user","validateFields","error","values","setState","password","authService","resetPassword","then","valid","success","catch","err","antd_es_notification__WEBPACK_IMPORTED_MODULE_7__","message","description","compareToFirstPassword","rule","value","callback","getFieldValue","validateToNextPassword","confirmDirty","force","handleConfirmBlur","e","target","_this2","this","URLSearchParams","location","search","get","confirmPasswordResetToken","result","invalid","_this$state","react__WEBPACK_IMPORTED_MODULE_14___default","a","createElement","react_helmet__WEBPACK_IMPORTED_MODULE_15__","title","className","styles","block","components_LayoutComponents_Loader__WEBPACK_IMPORTED_MODULE_18__","inner","react_router_dom__WEBPACK_IMPORTED_MODULE_17__","to","name","layout","hideRequiredMark","Item","hasFeedback","getFieldDecorator","rules","required","validator","antd_es_input__WEBPACK_IMPORTED_MODULE_3__","prefix","antd_es_icon__WEBPACK_IMPORTED_MODULE_5__","type","style","color","placeholder","onBlur","antd_es_button__WEBPACK_IMPORTED_MODULE_1__","htmlType","react_router_dom__WEBPACK_IMPORTED_MODULE_16__","component","NotFoundPage","Component","module","exports","login"],"mappings":"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","file":"static/js/54.48f6fa93.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport { Form, Input, Button, notification, Icon } from 'antd'\nimport { Helmet } from 'react-helmet'\nimport { Link, Route } from 'react-router-dom'\nimport Loader from 'components/LayoutComponents/Loader'\nimport styles from './style.module.scss'\nimport { authService } from '../../../../services'\nimport NotFoundPage from '../../../404'\n\n@Form.create()\nclass Reset extends Component {\n  state ={\n    tokenLoad: true,\n    loading: false,\n    token: true\n  }\n\n  componentDidMount() {\n    const query = new URLSearchParams(this.props.location.search);\n    const token = query.get('token');\n    if(!token){\n      this.setState({token: false});\n    }\n    else{\n      authService.confirmPasswordResetToken(token).then(result =>{\n        this.setState({user: result, tokenLoad: false, valid: true});\n      }).catch((err) =>{\n        this.setState({tokenLoad: false, invalid: true, message: err});\n      })\n    }\n  }\n\n  onSubmit = event => {\n    event.preventDefault()\n    const { form } = this.props\n    const { user } = this.state\n    form.validateFields((error, values) => {\n      if (!error) {\n        this.setState({loading: true});\n        user.password = values.password\n        authService.resetPassword(user)\n          .then(() => {\n            this.setState({loading: false, valid: false, success: true});\n          })\n          .catch((err) => {\n            notification.error({\n              message: 'Failed',\n              description: err,\n            })\n            this.setState({loading: false});\n          })\n      }\n    })\n  }\n\n  compareToFirstPassword = (rule, value, callback) => {\n    const { form } = this.props\n    if (value && value !== form.getFieldValue('password')) {\n      callback('Your password and confirmation does not match!')\n    } else {\n      callback()\n    }\n  }\n\n  validateToNextPassword = (rule, value, callback) => {\n    const { form } = this.props\n    const { confirmDirty } = this.state\n    if (value && confirmDirty) {\n      form.validateFields(['confirm'], { force: true })\n    }\n    callback()\n  }\n\n  handleConfirmBlur = e => {\n    const { value } = e.target\n    const { confirmDirty } = this.state\n    this.setState({\n      confirmDirty: confirmDirty || !!value,\n    })\n  }\n\n  render() {\n    const { form } = this.props\n    const { loading, valid, invalid, token, tokenLoad, message, user, success } = this.state\n    if(!token) return (<Route component={NotFoundPage} />)\n\n    return (\n      <div>\n        <Helmet title=\"Forgot\" />\n        <div className={styles.block}>\n          <div className=\"row\">\n            <div className=\"col-xl-12\">\n              {tokenLoad && <Loader />}\n              {success &&\n                <div className={styles.inner}>\n                  <div>\n                    <h4 className=\"text-uppercase\">\n                      <strong>Password updated</strong>\n                    </h4>\n                    <p className=\"mb-3\">Your password has been successfully updated</p>\n                    <Link to=\"/user/login\" className=\"btn\">\n                      &larr; Sign in to continue\n                    </Link>\n                  </div>\n                </div>\n              }\n              {valid &&\n                <div className={styles.inner}>\n                  <div className={styles.form}>\n                    <h4 className=\"text-uppercase\">\n                      <strong>Reset Password</strong>\n                    </h4>\n                    <p className=\"mb-3\">Hey {user.name}, please reset your password</p>\n                    <br />\n                    <Form layout=\"vertical\" hideRequiredMark onSubmit={this.onSubmit}>\n                      <Form.Item hasFeedback>\n                        {form.getFieldDecorator('password', {\n                          rules: [\n                            {\n                              required: true,\n                              message: 'Please input your password'\n                            },\n                            {\n                              validator: this.validateToNextPassword,\n                            },\n                          ],\n                        })(\n                          <Input\n                            prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\n                            type=\"password\"\n                            placeholder=\"New password\"\n                          />,\n                        )}\n                      </Form.Item>\n                      <Form.Item hasFeedback>\n                        {form.getFieldDecorator('confirm', {\n                          rules: [\n                            {\n                              required: true,\n                              message: 'Please confirm your password'\n                            },\n                            {\n                              validator: this.compareToFirstPassword,\n                            },\n                          ],\n                        })(\n                          <Input\n                            type=\"password\"\n                            onBlur={this.handleConfirmBlur}\n                            placeholder=\"Confirm your password\"\n                          />,\n                        )}\n                      </Form.Item>\n                      <div className=\"mb-2\">\n                        <Link to=\"/user/login\" className=\"utils__link--blue utils__link--underlined\">\n                          Back to login\n                        </Link>\n                      </div>\n                      <div className=\"form-actions\">\n                        <Button\n                          type=\"primary\"\n                          className=\"width-150 mr-4\"\n                          htmlType=\"submit\"\n                          loading={loading}\n                        >\n                          Reset Password\n                        </Button>\n                      </div>\n                    </Form>\n                  </div>\n                </div>\n              }\n\n              {invalid &&\n                <div className={styles.inner}>\n                  <div>\n                    <h4>\n                      <strong>Your password reset link is not valid</strong>\n                    </h4>\n                    <p className=\"mb-3\">Please, see the below message to know what went wrong</p>\n                    <p className=\"mb-3\">{ message }</p>\n                    <Link to=\"/user/login\" className=\"btn\">\n                      &larr; Sign in to continue\n                    </Link>\n                  </div>\n                </div>\n              }\n\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Reset\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"style_login__IWqGl\",\"block\":\"style_block__1yHL1\",\"inner\":\"style_inner__3o7oX\",\"form\":\"style_form__1l7vp\"};"],"sourceRoot":""}